(()=>{const X=(B=sessionStorage.getItem("bis_data"),w={adOpt:!!document.querySelector("script[ad-opt-on]"),config:null},null!==B&&(w.config=JSON.parse(B)),w);var B,w;const K=X&&X.config?X.config.config.instagramConfig.TRAFFIC_LISTENER_CONFIG.PARSERS:[],e=X&&X.config?X.config.config.instagramConfig.TRAFFIC_LISTENER_CONFIG.PROPERTIES_FOR_VIDEO_DATA:[],k=X&&X.config?`${X.config.id}_i`:null,R=document.head.querySelector("script[bis_use][data-dynamic-id]")?.getAttribute("data-dynamic-id")||"";!(!X||!X.adOpt)&&X.adOpt;let u=0;const A=function(X,B){return function(){!function(X,B,w){try{let K={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:w,from:X,to:X.substring(0,X.length-2),content:B,dynamicAppId:R};window.postMessage(K)}catch(X){}}(k,X,B)}},s=function(X,B){let w=null,K=null;for(let k of e){const e=k.NAME,R=k.PATH_NAME,u=k.IS_NECESSARY,A=k.DEFAULT_VALUE;if(w||(w={}),"detectionTime"!==e){if(B[R])if("showFullText"!==e){if(w[e]=U(X,B[R],A),u&&!w[e])return null}else K=B[R].some((B=>!!U(X,B,A)))}else w[e]=Date.now()/1e3|0}return w.headlineText?.length&&(w.fullText=w.headlineText+"\n"+w.fullText),delete w.headlineText,!1===K&&(w.fullText=""),w},U=function(X,B,w){let K=X;for(let[X,e]of Object.entries(B)){if("*"===e&&K.length){const w=B.slice(+X+1),e=w.length-1;return K.map((X=>{let B=X;for(let[X,K]of Object.entries(w))if(B[K]&&(B=B[K]),e===+X&&"string"==typeof B)return B}))}if(K[e])K=K[e];else if(!K[e]){K=w;break}}return K},l=function(X,B){if(!X||!X.length)return;let w=null;for(let K of X){let X="";try{if(H(K,B.PATH_CHECK_PROPERTIES))w=s(K,B.PATHS_GET_PROPERTIES),X=w.videoSrc?"INSTAGRAM_VIDEO_DATA":"INSTAGRAM_CAROUSEL_SLIDES_SOURCES";else{if(!B.RULES_TO_GET_FULL_TEXT||!H(K,B.RULES_TO_GET_FULL_TEXT.PATH_CHECK_PROPERTIES))continue;w=s(K,B.RULES_TO_GET_FULL_TEXT.PATHS_GET_PROPERTIES),X="INSTAGRAM_FULL_TEXT_DATA"}w&&setTimeout(A(w,X),0)}catch(X){}}},Q=function(X,B){if(!X||!X.length)return;let w=[];for(let K of X){if(!H(K,B.PATH_CHECK_PROPERTIES))continue;let X=s(K,B.PATHS_GET_PROPERTIES);X&&(null===X.videoVersions&&delete X.videoVersions,w.push(X))}w.length&&setTimeout(A(w,"INSTAGRAM_STORY_DATA"),0)},H=function(X,B){let w=!1;for(let K of B){let B=X,e=K.length-1;for(let[X,k]of Object.entries(K))if(k in B&&B[k]){if(B=B[k],e===+X){w=!0;break}}else{if("*"===k&&B.length&&B.length>1&&!w&&e===+X){w=!0;break}w=!1}if(w)break}return w},y={XMLHttpRequest:function(X){let B=XMLHttpRequest.prototype.open,w=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.setRequestHeader=function(){const X=arguments[0].toLowerCase(),B=arguments[1];this.requestHeaders||(this.requestHeaders={}),this.requestHeaders[X]=B,w.apply(this,arguments)},XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],B.apply(this,arguments)};let K=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){let B=this.onreadystatechange;return this.onreadystatechange=function(){const w=function(){const B=X.AD_TYPES_WAYS_TO_PROPERTIES;let w=X.QUERY;for(let X=0;X<B.length;X++){const K="QUERY_AD_TYPE_"+X,e=B[X];w=w.replace(K,e.QUERY_URL_PATH)}return new RegExp(w)}(),K=X.MATCH_HEADERS,e=this.requestHeaders?Object.keys(this.requestHeaders):null;let k=!1;if(e&&(k=e.some((X=>{if(K[X]&&K[X].includes(this.requestHeaders[X]))return!0}))),4===this.readyState&&w.test(this.responseURL))for(let u of X.AD_TYPES_WAYS_TO_PROPERTIES){const A=this.responseURL.includes(u.QUERY_URL_PATH);if(k||A){let s=this.response.length?JSON.parse(this.response):this.response;function R(X,B){let w=B;for(let[B,K]of Object.entries(X))w&&w[K]&&(w=w[K]),"*"===K&&w.length&&(w=w.map((w=>R(X.slice(+B+1),w))));return w}let U=R(u.PATH_TO_POSTS,s);"story"===u.AD_TYPE&&this.responseURL.includes(u.QUERY_URL_PATH)&&U.length?U.forEach((X=>{X&&Q(X,u)})):"feed"===u.AD_TYPE&&l(U,u)}}if(B)return B.apply(this,arguments)},K.apply(this,arguments)}},script:function(X){function B(){let B=Array.from(document.querySelectorAll("script"));const w=new RegExp(X.REGEXP_FILTER);let K=B.filter((X=>X.innerHTML.search(w)>-1));return K.length?K[0]:null}if(u++,"complete"!==document.readyState&&u<15){let B=null;return void(B=setTimeout((()=>{B&&clearTimeout(B),y.script(X)}),200))}let w=function(){let X=B();return X?JSON.parse(X.innerHTML):null}();let K=function X(B,w){let K=w;for(let[w,e]of Object.entries(B))K&&K[e]&&(K=K[e]),"*"===e&&K.length&&(K=K.map((K=>X(B.slice(+w+1),K))));return K}(X.PATH_TO_POSTS,w);l(K,X)}};for(let X of K)X.USE&&y[X.TYPE](X)})();