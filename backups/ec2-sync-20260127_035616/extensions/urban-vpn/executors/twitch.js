(()=>{const X=document.head.querySelector("script[bis_use][data-dynamic-id]")?.getAttribute("data-dynamic-id")||"";function B(B,w,K,e,k=null){try{document.location.host;let R="detector",u=K;!u&&k&&(u=k[0]?.type?k[0].type:null);let A={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"VIDEO_XHR_CANDIDATE",from:R,to:R.substring(0,R.length-2),content:{requestMethod:B,url:w,type:u,content:e},dynamicAppId:X};if(k&&k instanceof Promise)return void k.then((X=>{A.content.encodedPostBody=X,A.type="VIDEO_TWITCH_INSTREAM_DATA",window.postMessage(A,"*")}));e?.includes("streamPlaybackAccessToken")&&(A.type="VIDEO_TWITCH_INSTREAM_DATA"),window.postMessage(A,"*")}catch(X){}}let w=XMLHttpRequest.prototype.open,K=XMLHttpRequest.prototype.send,e=fetch;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],w.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){const X=Object.assign(arguments,{});let w=this.onreadystatechange;return this.onreadystatechange=function(){if(4!==this.readyState||function(X){const B=document.querySelector("script[data-bis-config]")?JSON.parse(document.querySelector("script[data-bis-config]").getAttribute("data-bis-config")):null;return!!B&&B.some((B=>X.includes(B)))}(this.responseURL)||B(this.requestMethod,this.responseURL,this.getResponseHeader("content-type"),this.response,X),w)return w.apply(this,arguments)},K.apply(this,arguments)},fetch=function(){const X=arguments;let w=arguments[0]instanceof Request?arguments[0].url:arguments[0];const K=arguments[0]instanceof Request?arguments[0].method:arguments[1]?.method?arguments[1].method:"GET",k="POST"===K?arguments[1].body:null;return"object"==typeof w&&w.href&&(w=w.href),new Promise(((R,u)=>{e.apply(this,X).then((function(X){if(X.body instanceof ReadableStream){const e=X.headers.get("content-type"),R=X.json;X.json=function(){return new Promise(((u,A)=>{R.apply(this,arguments).then((function(R){0!==X.url.search(/data:application\/json;base64/)&&B(K,w,e,JSON.stringify(R),k),u(R)})).catch((function(X){A(X)}))}))};const u=X.text;X.text=function(){return new Promise(((R,A)=>{u.apply(this,arguments).then((function(u){0!==X.url.search(/data:application\/json;base64/)&&B(K,w,e,u,k),R(u)})).catch((function(X){A(X)}))}))},new RegExp("video-edge.*.ts$").test(w)&&"POST"===K&&k?.arrayBuffer&&B(K,w,k.type,null,k.text())}R.apply(this,arguments)})).catch((function(X){u.apply(this,arguments)}))}))}})();