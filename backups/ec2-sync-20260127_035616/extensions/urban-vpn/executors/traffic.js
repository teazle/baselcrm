(()=>{const X=document.head.querySelector("script[bis_use][data-dynamic-id]")?.getAttribute("data-dynamic-id")||"";function B(B,w,K,e,k=null){try{let R=document.location.host,u="detector",A={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"VIDEO_XHR_CANDIDATE",from:u,to:u.substring(0,u.length-2),content:{requestMethod:B,url:w,type:K,content:e},dynamicAppId:X};R.includes("youtube.com")&&k&&k[0]&&k[0].length&&(A.content.encodedPostBody=k[0]),window.postMessage(A,"*")}catch(X){}}let w=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],w.apply(this,arguments)};let K=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){const X=Object.assign(arguments,{});let w=this.onreadystatechange;return this.onreadystatechange=function(){if(4!==this.readyState||function(X){const B=document.querySelector("script[data-bis-config]")?JSON.parse(document.querySelector("script[data-bis-config]").getAttribute("data-bis-config")):null;return!!B&&B.some((B=>X.includes(B)))}(this.responseURL)||B(this.requestMethod,this.responseURL,this.getResponseHeader("content-type"),this.response,X),w)return w.apply(this,arguments)},K.apply(this,arguments)};let e=fetch;fetch=function(){const X=arguments;let w=arguments[0]instanceof Request?arguments[0].url:arguments[0];const K=arguments[0]instanceof Request?arguments[0].method:"GET";return"object"==typeof w&&w.href&&(w=w.href),new Promise(((k,R)=>{e.apply(this,X).then((function(X){if(X.body instanceof ReadableStream){const e=X.json;X.json=function(){return new Promise(((k,R)=>{e.apply(this,arguments).then((function(e){0!==X.url.search(/data:application\/json;base64/)&&B(K,w,X.headers.get("content-type"),JSON.stringify(e)),k(e)})).catch((function(X){R(X)}))}))};const k=X.text;X.text=function(){return new Promise(((e,R)=>{k.apply(this,arguments).then((function(k){0!==X.url.search(/data:application\/json;base64/)&&B(K,w,X.headers.get("content-type"),k),e(k)})).catch((function(X){R(X)}))}))}}k.apply(this,arguments)})).catch((function(X){R.apply(this,arguments)}))}))}})();