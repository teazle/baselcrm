(()=>{function X(){const X=function(){let X=sessionStorage.getItem("bis_data");if(null!==X)return JSON.parse(X);try{let X={posdMessageId:"PANELOS_MESSAGE",posdHash:GenerateQuickId(),type:"CONFIG_NOT_FOUND",from:"",to:"",content:"configuration not found",dynamicAppId:K};window.postMessage(X)}catch(X){}return null}(),B=X?X.config.twitterConfig.TRAFFIC_DETECTOR:null,w=X?X.id+"_w":null,K=document.head.querySelector("script[bis_use][data-dynamic-id]")?.getAttribute("data-dynamic-id")||"";if(null!==B){var e=this&&this.__extends||function(X,B){for(var w in B)B.hasOwnProperty(w)&&(X[w]=B[w]);function K(){this.constructor=X}K.prototype=B.prototype,X.prototype=new K},k=function(){function X(){}return X.isWhiteSpace=function(X){return/\s/g.test(X)},X.isLetter=function(X){return X.match(/[a-z]/i)},X.isNumber=function(X){return!isNaN(parseFloat(X))&&!isNaN(X-0)},X.capitalizeFirst=function(X){return"string"!=typeof X?"":X.charAt(0).toUpperCase()+X.slice(1)},X.isLookLikeLogicalOperator=function(X){return[">","<","=","!"].includes(X)},X}(),R=function(){function X(){this.reset()}return X.prototype.reset=function(){this._prop="",this._alias=null},X.prototype.hasProp=function(){return this._prop.length>0},X.prototype.build=function(){if(!this.hasProp())return[];var X={prop:this._prop,alias:this._alias};return this.reset(),X},X.prototype.addCharToAlias=function(X){this._alias=this._alias?this._alias+X:X},X.prototype.addCharToProp=function(X){this._prop=this._prop?this._prop+X:X},X}(),u={OPERATOR:"OPERATOR",OPERAND_CONST_STRING_VALUE:"OPERAND_CONST_STRING_VALUE",OPERAND_CONST_NUMBER_VALUE:"OPERAND_CONST_NUMBER_VALUE",OPERAND_PROPERTY:"OPERAND_PROPERTY"},A=function(){function X(){this.reset()}return X.prototype.reset=function(){this._value=null,this._type=null},X.prototype.build=function(){if(!this._type)return[];var X=this._type===u.OPERAND_CONST_NUMBER_VALUE?parseFloat(this._value):this._value,B={type:{OPERATOR:"OPERATOR",OPERAND_CONST_STRING_VALUE:"CONST_VALUE",OPERAND_CONST_NUMBER_VALUE:"CONST_VALUE",OPERAND_PROPERTY:"PROPERTY"}[this._type],value:X};return this.reset(),B},X.prototype.markAsOperator=function(){return this._type=u.OPERATOR,this},X.prototype.markAsConstStringValueOperand=function(){return this._type=u.OPERAND_CONST_STRING_VALUE,this},X.prototype.markAsConstNumberValueOperand=function(){return this._type=u.OPERAND_CONST_NUMBER_VALUE,this},X.prototype.markAsPropertyOperand=function(){return this._type=u.OPERAND_PROPERTY,this},X.prototype.addCharToValue=function(X){return this._value=this._value?this._value+X:X,this},X.prototype.withValue=function(X){return this._value=X,this},X}(),s=new(function(){function X(){this._selectBuilder=new R,this._filterBuilder=new A,this.reset()}return X.prototype.reset=function(){return this.filterBuilder().reset(),this.selectBuilder().reset(),this._element="",this._select=[],this._filter=[],this._limit=null,this},X.prototype.filterBuilder=function(){return this._filterBuilder},X.prototype.selectBuilder=function(){return this._selectBuilder},X.prototype.build=function(){var X={element:this._element,select:this._select,filter:this._filter,limit:this._limit};return this.reset(),X},X.prototype.addCharToElementName=function(X){return this._element+=X,this},X.prototype.hasElementName=function(){return this._element.length>0},X.prototype.addConditionToFilter=function(X){return this._filter.push(X),this},X.prototype.addPropertyToSelect=function(X){return this._select.push(X),this},X.prototype.hasPropertiesInSelect=function(){return this._select.length>0},X}()),U=function(){function X(){}return X.query=function(X,B){let w=new f(X).parse(0),K=[{data:B,parents:[]}],e=0,k=[];for(let X=0;X<w.length;X++){let B=w[X],R=[];for(let X=0;X<K.length;X++){let w=K[X];if(!w.data.hasOwnProperty(B.element))continue;let u={data:w.data[B.element],parents:w.parents.slice()};if("*"===B.limit){let X=u.data;u.data.length||(X=Object.keys(u.data));for(let K of X){const X="string"==typeof K?K:u.data.indexOf(K);let A=u.data[X],s={data:A,parents:w.parents.slice()};if(B.select.length>0){let X={element:B.element,data:{}};B.select.forEach((function(B){if(B.prop.includes(".")){let w,K=B.prop.split(".");const e=K.length-1;K.forEach(((K,k)=>{if(w||(w=A[K]),w&&w.hasOwnProperty(K)&&k!==e&&w[K]&&(w=w[K]),w&&w.hasOwnProperty(K)&&k===e&&w[K]){let e=B.alias?B.alias:K;X.data[e]=w[K]}}))}if(A.hasOwnProperty(B.prop)&&!X.data[column]){let w=B.alias?B.alias:B.prop;X.data[w]=A[B.prop]}})),k.push(X),s.parents.push(e),e+=1}R.push(s)}}else R.push(u)}if(K=R,B.filter.length>0){let X=B.filter[0],w=B.filter[1],e=B.filter[2],k=function(X,B){return"CONST_VALUE"===B.type?B.value:X.data[B.value]};K=K.filter((function(B){let K=k(B,X),R=k(B,e);return"=="===w.value?K==R:"==="===w.value?K===R:"!="===w.value?K!=R:"!=="===w.value?K!==R:">="===w.value?K>=R:"<="===w.value?K<=R:">"===w.value?K>R:"<"===w.value?K<R:void 0}))}}let R=w[w.length-1],u=[];return K.forEach((function(X){X.parents.length&&X.parents.forEach((function(B){var w=k[B];u.hasOwnProperty(B)||(u[B]={},u[B][w.element]=w.data),u[B][R.element]=u[B][R.element]?u[B][R.element].concat(X.data):[X.data]}))})),u.filter((function(X){return X}))},X}(),l={FILTER:"filter",SELECT:"select"},Q=function(){function X(X){if("string"!=typeof X)throw new TypeError('Param "query" must be string type');if(0===X.trim().length)throw new TypeError('Param "query" must be not empty type');this._query=X,this._process=null,this._pos=null}return X.prototype.switchProcess=function(X){this._process=X},X.prototype.isRunningProcess=function(X){return this._process===X},X.prototype.parse=function(){throw new Error("A child must implement this method")},X.prototype.name=function(){throw new Error("A child must implement this method")},X.prototype.throwSyntaxError=function(X){throw new SyntaxError("JsonQuery: "+X)},X.prototype.throwSyntaxErrorWithTrace=function(X){var B=this._query.substr(0,this._pos+1);this.throwSyntaxError(X+' "'+B+'"')},X.prototype.throwSyntaxErrorUnexpectedChar=function(){var X=this._query[this._pos];this.throwSyntaxErrorWithTrace('Unexpected symbol "'+X+'" in')},X}(),H={LOOKING_FOR_PROPERTY:"LOOKING_FOR_PROPERTY",LOOKING_FOR_SEPARATOR_OR_ALIAS:"LOOKING_FOR_SEPARATOR_OR_ALIAS",LOOKING_FOR_ALIAS_NAME:"LOOKING_FOR_ALIAS_NAME",SELECT_OPERATION_SUCCESS:"SELECT_OPERATION_SUCCESS",SELECT_OPERATION_BEFORE_FINISH:"SELECT_OPERATION_BEFORE_FINISH",SELECT_RECORDING_PROPERTY_NAME:"SELECT_RECORDING_PROPERTY_NAME",SELECT_PARSING_ALIAS_KEYWORD:"SELECT_PARSING_ALIAS_KEYWORD",SELECT_RECORDING_ALIAS_NAME:"SELECT_RECORDING_ALIAS_NAME"},y=function(X){function B(){X.apply(this,arguments)}return e(B,X),B.prototype.parse=function(X){var B=s.selectBuilder();for(this._runLookingForPropertyProcess(),this._pos=X;this._pos<this._query.length;this._pos++){var w=this._query[this._pos];if(this._isLookingForProperty()){if(" "===w)continue;")"===w?(this._pos=this._pos-1,this._finishParsing()):(this._pos=this._pos-1,this._runRecordingPropertyNameProcess())}else if(this._isRecordingPropertyName())if(" "===w)this._runLookingForSeparatorOrAlias();else if(","===w){var K=B.build();s.addPropertyToSelect(K),this._runLookingForPropertyProcess()}else")"===w?(this._pos=this._pos-1,this._finishParsing()):B.addCharToProp(w);else if(this._isLookingForSeparatorOrAlias()){if(" "===w)continue;if(")"===w)this._pos=this._pos-1,this._finishParsing();else if(","===w){K=B.build();s.addPropertyToSelect(K),this._runLookingForPropertyProcess()}else"a"===w?(this._pos=this._pos-1,this._runParsingAlias()):this.throwSyntaxErrorUnexpectedChar()}else if(this._isParsingAliasKeyword()){if(this._query.substr(this._pos).toLowerCase().startsWith("as ")){this._pos=this._pos+3-1,this._runLookingForAliasName();continue}this.throwSyntaxErrorUnexpectedChar()}else if(this._isLookingForAliasName()){if(" "===w)continue;this._pos=this._pos-1,this._runRecordingAliasName()}else if(this._isRecordingAliasName())if(" "===w){K=B.build();s.addPropertyToSelect(K),this._runLookingForPropertyProcess()}else if(","===w){K=B.build();s.addPropertyToSelect(K),this._runLookingForPropertyProcess()}else")"===w?(this._pos=this._pos-1,this._finishParsing()):B.addCharToAlias(w);else if(this._isFinishOperation()){if(B.hasProp()){K=B.build();s.addPropertyToSelect(K)}this._markAsSuccessParsing();break}}return this._isSuccessParsed()?s.hasPropertiesInSelect()||this.throwSyntaxErrorWithTrace("select operation requires at least one property"):this.throwSyntaxErrorWithTrace("unexpected end of select operation"),this._pos},B.prototype.name=function(){return l.SELECT},B.prototype._runLookingForPropertyProcess=function(){this.switchProcess(H.LOOKING_FOR_PROPERTY)},B.prototype._runRecordingPropertyNameProcess=function(){this.switchProcess(H.SELECT_RECORDING_PROPERTY_NAME)},B.prototype._runLookingForSeparatorOrAlias=function(){this.switchProcess(H.LOOKING_FOR_SEPARATOR_OR_ALIAS)},B.prototype._runParsingAlias=function(){this.switchProcess(H.SELECT_PARSING_ALIAS_KEYWORD)},B.prototype._runLookingForAliasName=function(){this.switchProcess(H.LOOKING_FOR_ALIAS_NAME)},B.prototype._runRecordingAliasName=function(){this.switchProcess(H.SELECT_RECORDING_ALIAS_NAME)},B.prototype._finishParsing=function(){this.switchProcess(H.SELECT_OPERATION_BEFORE_FINISH)},B.prototype._markAsSuccessParsing=function(){this.switchProcess(H.SELECT_OPERATION_SUCCESS)},B.prototype._isLookingForProperty=function(){return this.isRunningProcess(H.LOOKING_FOR_PROPERTY)},B.prototype._isLookingForAliasName=function(){return this.isRunningProcess(H.LOOKING_FOR_ALIAS_NAME)},B.prototype._isRecordingPropertyName=function(){return this.isRunningProcess(H.SELECT_RECORDING_PROPERTY_NAME)},B.prototype._isSuccessParsed=function(){return this.isRunningProcess(H.SELECT_OPERATION_SUCCESS)},B.prototype._isLookingForSeparatorOrAlias=function(){return this.isRunningProcess(H.LOOKING_FOR_SEPARATOR_OR_ALIAS)},B.prototype._isParsingAliasKeyword=function(){return this.isRunningProcess(H.SELECT_PARSING_ALIAS_KEYWORD)},B.prototype._isRecordingAliasName=function(){return this.isRunningProcess(H.SELECT_RECORDING_ALIAS_NAME)},B.prototype._isFinishOperation=function(){return this.isRunningProcess(H.SELECT_OPERATION_BEFORE_FINISH)},B}(Q),p={FILTER_LOOKING_FOR_OPERAND:"FILTER_LOOKING_FOR_OPERAND",FILTER_LOOKING_FOR_OPERATOR:"FILTER_LOOKING_FOR_OPERATOR",FILTER_RECORDING_PROPERTY_NAME:"FILTER_RECORDING_PROPERTY_NAME",FILTER_RECORDING_STRING_VALUE:"FILTER_RECORDING_STRING_VALUE",FILTER_RECORDING_NUMBER_VALUE:"FILTER_RECORDING_NUMBER_VALUE",FILTER_PARSING_OPERATOR:"FILTER_PARSING_OPERATOR",FILTER_FINISH_PROCESS:"FILTER_FINISH_PROCESS",FILTER_SUCCESS:"FILTER_SUCCESS"},P=function(X){function B(){X.apply(this,arguments)}return e(B,X),B.prototype.parse=function(X){var B=s.filterBuilder();for(this.switchProcess(p.FILTER_LOOKING_FOR_OPERAND),this._pos=X;this._pos<this._query.length;this._pos++){var w=this._query[this._pos];if(this.isRunningProcess(p.FILTER_LOOKING_FOR_OPERAND)){if(" "===w)continue;"@"===w?(B.markAsPropertyOperand(),this.switchProcess(p.FILTER_RECORDING_PROPERTY_NAME)):"'"===w?(B.markAsConstStringValueOperand(),this.switchProcess(p.FILTER_RECORDING_STRING_VALUE)):k.isNumber(w)?(this._pos=this._pos-1,B.markAsConstNumberValueOperand(),this.switchProcess(p.FILTER_RECORDING_NUMBER_VALUE)):")"===w?(this._pos=this._pos-1,this.switchProcess(p.FILTER_FINISH_PROCESS)):this.throwSyntaxErrorUnexpectedChar()}else if(this.isRunningProcess(p.FILTER_RECORDING_PROPERTY_NAME))if(" "===w){var K=B.build();s.addConditionToFilter(K),this.switchProcess(p.FILTER_LOOKING_FOR_OPERATOR)}else if(")"===w){this._pos=this._pos-1;K=B.build();s.addConditionToFilter(K),this.switchProcess(p.FILTER_FINISH_PROCESS)}else if(k.isLookLikeLogicalOperator(w)){this._pos=this._pos-1;K=B.build();s.addConditionToFilter(K),this.switchProcess(p.FILTER_LOOKING_FOR_OPERATOR)}else B.addCharToValue(w);else if(this.isRunningProcess(p.FILTER_LOOKING_FOR_OPERATOR)){if(" "===w)continue;")"===w?(this._pos=this._pos-1,this.switchProcess(p.FILTER_FINISH_PROCESS)):k.isLookLikeLogicalOperator(w)&&(this._pos=this._pos-1,this.switchProcess(p.FILTER_PARSING_OPERATOR))}else if(this.isRunningProcess(p.FILTER_RECORDING_STRING_VALUE))if("'"===w){K=B.build();s.addConditionToFilter(K),this.switchProcess(p.FILTER_LOOKING_FOR_OPERATOR)}else B.addCharToValue(w);else if(this.isRunningProcess(p.FILTER_RECORDING_NUMBER_VALUE))if(" "===w){K=B.build();s.addConditionToFilter(K),this.switchProcess(p.FILTER_LOOKING_FOR_OPERATOR)}else if(k.isLookLikeLogicalOperator(w))this._pos=this._pos-1,this.switchProcess(p.FILTER_PARSING_OPERATOR);else if(")"===w){this._pos=this._pos-1;K=B.build();s.addConditionToFilter(K),this.switchProcess(p.FILTER_FINISH_PROCESS)}else k.isNumber(w)||"."===w?B.addCharToValue(w):this.throwSyntaxErrorUnexpectedChar();else if(this.isRunningProcess(p.FILTER_PARSING_OPERATOR)){var e=this.parseLogicalOperation(this._query.substr(this._pos));B.markAsOperator().withValue(e);K=B.build();s.addConditionToFilter(K),this._pos=this._pos+e.length-1,this.switchProcess(p.FILTER_LOOKING_FOR_OPERAND)}else if(this.isRunningProcess(p.FILTER_FINISH_PROCESS)){this.switchProcess(p.FILTER_SUCCESS);break}}return this.isRunningProcess(p.FILTER_SUCCESS)||this.throwSyntaxErrorWithTrace("unexpected end of filter operation"),this._pos},B.prototype.name=function(){return l.FILTER},B.prototype.parseLogicalOperation=function(X){for(var B=X.substr(0,3),w=[["!==","==="],["!=","==","<=",">="],["<",">"]],K=0;K<w.length;K++){var e=w[K].find((function(X){return B.startsWith(X)}));if(e)return e}throw new Error("JsonQuery: could not find operator")},B}(Q),m={LOOKING_FOR_ELEMENT_NAME:"LOOKING_FOR_ELEMENT_NAME",RECORDING_ELEMENT_NAME:"RECORDING_ELEMENT_NAME",BLOCK_PARSING:"BLOCK_PARSING",LIMIT_PARSING:"LIMIT_PARSING",LOOKING_FOR_OPERATION:"LOOKING_FOR_OPERATION",RECORDING_OPERATION_NAME:"RECORDING_OPERATION_NAME"},f=function(X){function B(B){X.call(this,B),this._operations=[new P(B),new y(B)]}return e(B,X),B.prototype.parse=function(X){s.reset();var B="",w=[];for(this._runLookingForElementNameProcess(),this._pos=X;this._pos<this._query.length;this._pos++){var K=this._query[this._pos];if(this._isLookingForElementNameProcess()){if(" "===K)continue;"."===K||(this._pos=this._pos-1),this._runRecordingElementNameProcess()}else if(this.isRunningProcess(m.RECORDING_ELEMENT_NAME))if(this._isElementSeparator(K)){var e=s.build();w.push(e)}else this._needStartParseBlock(K)?this._runParsingBlockProcess():this._isNotAllowedCharForElementName(K)?this.throwSyntaxErrorWithTrace('symbol "'+K+'" is not allowed as part of element name'):s.addCharToElementName(K);else if(this._isRunningBlockParsingProcess()){if(" "===K)continue;this._isLooksLikeLimitOperation(K)?(s._limit="*",this._runLookingForOperation()):"#"===K?this._runRecordingOperationName():this.throwSyntaxErrorUnexpectedChar()}else if(this._isRunningLookingForOperation()){if(" "===K)continue;if("#"===K)this._runRecordingOperationName();else if("]"===K){e=s.build();w.push(e),this._runLookingForElementNameProcess()}else this.throwSyntaxErrorUnexpectedChar()}else if(this._isRunningRecordingOperationName())if("("===K){var k=this._findParserForOperatorOrThrowException(B);B="",this._pos=this._pos+1,this._pos=k.parse(this._pos),this._runLookingForOperation()}else this._isNotAllowedCharForOperationName(K)?this.throwSyntaxErrorUnexpectedChar():B+=K}if(s.hasElementName()){e=s.build();w.push(e)}return w},B.prototype._runLookingForElementNameProcess=function(){this.switchProcess(m.LOOKING_FOR_ELEMENT_NAME)},B.prototype._runRecordingElementNameProcess=function(){this.switchProcess(m.RECORDING_ELEMENT_NAME)},B.prototype._runParsingBlockProcess=function(){this.switchProcess(m.BLOCK_PARSING)},B.prototype._runLookingForOperation=function(){this.switchProcess(m.LOOKING_FOR_OPERATION)},B.prototype._runRecordingOperationName=function(){this.switchProcess(m.RECORDING_OPERATION_NAME)},B.prototype._isLookingForElementNameProcess=function(){return this.isRunningProcess(m.LOOKING_FOR_ELEMENT_NAME)},B.prototype._isRunningBlockParsingProcess=function(){return this.isRunningProcess(m.BLOCK_PARSING)},B.prototype._isRunningLookingForOperation=function(){return this.isRunningProcess(m.LOOKING_FOR_OPERATION)},B.prototype._isRunningRecordingOperationName=function(){return this.isRunningProcess(m.RECORDING_OPERATION_NAME)},B.prototype._isElementSeparator=function(X){return"."===X},B.prototype._isNotAllowedCharForElementName=function(X){return k.isWhiteSpace(X)||["#","@","!","[","]","%","-","+","^","*","(",")","?",":","{","}"].includes(X)},B.prototype._isNotAllowedCharForOperationName=function(X){return k.isWhiteSpace(X)||["#","@","!","[","]","%","-","+","^","*","(",")","?",":","{","}"].includes(X)},B.prototype._isLooksLikeLimitOperation=function(X){return"*"===X},B.prototype._needStartParseBlock=function(X){return"["===X},B.prototype._findParserForOperatorOrThrowException=function(X){let B=this._operations.find((function(B){return B.name()===X}));return B||this.throwSyntaxErrorWithTrace('unknown operation "'+X+'"'),B},B}(Q);const F={parseJSON:function(X){try{if(X&&"string"==typeof X)return JSON.parse(X)}catch(X){}},jsonQuery:function(X,B){let w=[],K=B.queries.map((function(K,e){let k=Object.assign({},X);return w.push(k),U.query(K,w[e]).map((X=>{if(B.props)for(let w of B.props){let B=w[0],K=w[1];X[B]&&(X[B]=X[B][0].map((X=>{let B={};return X.key&&K.includes(X.key)?X.value:X.key?void 0:(K.forEach((w=>{X[w]&&!B[w]&&(X[w].length&&"string"!=typeof X[w]?B[w]=X[w][0]:B[w]=X[w])})),Object.keys(B).length?B:void 0)})).filter((X=>X)))}else!X.hasOwnProperty(B.prop)&&X.media&&(X[B.prop]=[JSON.stringify(X.media[0])],delete X.media);return X}))})),e=[];return K.forEach((function(X){e=e.concat(X)})),e},forEach:function(X,B){let w=[];return X.forEach((function(X){const K=B.prop?X[B.prop]:X,e=F[B.pipe](K);w.push(e)})),w},filterContains:function(X,B){return X.filter((X=>{let w=!1;return B.props&&B.props.length&&(w=B.props.some((B=>X.hasOwnProperty(B)))),!(!X.hasOwnProperty(B.prop)&&!w)&&B.types.some((K=>{let e=!1;if(X[B.prop]&&(e=X[B.prop].includes(`"${K}"`)),w)for(let w of B.props){if("string"==typeof X[w]&&X[w].includes(`"${K}"`)){e=!0;break}if(X.hasOwnProperty("type")&&X.type===K){e=!0;break}}return e}))}))},arrToVal:function(X,B){return X.map((X=>{let w={};return B.prop&&X[B.prop]&&!B.props&&(X[B.prop]=X[B.prop][0],w=X),B.props&&B.props.forEach((B=>{const K=B[0];B[1].forEach((B=>{X[K]&&(X[K].length&&(X[K]=X[K][0]),X[K][B]&&(w[B]=X[K][B]))}))})),w}))},sendVideoData:function(X){!function(X){X.detectionTime=Date.now()/1e3|0;let B={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"TWITTER_VIDEO_DATA",from:w,to:w.substring(0,w.length-2),content:X,dynamicAppId:K};try{window.postMessage(B)}catch(X){}}(X)},sendCarouselData:function(X){!function(X){X.detectionTime=Date.now()/1e3|0;let B={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"TWITTER_CAROUSEL_DATA",from:w,to:w.substring(0,w.length-2),content:X,dynamicAppId:K};try{window.postMessage(B)}catch(X){}}(X)},mapParseJsonToObj:function(X,B){return X.map((X=>(X[B.prop]&&"string"==typeof X[B.prop]&&(X[B.prop]=JSON.parse(X[B.prop])),X[B.prop]&&1===X[B.prop].length&&(X[B.prop]=X[B.prop][0]),X)))},mapVideoData:function(X,B){return X.map((X=>{const w=X.tweets?X.tweets:{};B&&B.props&&B.props.forEach((B=>{if("string"==typeof B)X[B]&&(w[B]=X[B]);else if("object"==typeof B&&B.length){let K=X;B.forEach(((X,B,e)=>{K[X]&&B!==e.length-1?K=K[X]:B===e.length-1&&(w[X]=K[X])}))}}));let K={tweets:w};if(X.string_value){if(X.string_value.media_entities){const B=Object.keys(X.string_value.media_entities);return K.variants=X.string_value.media_entities[B[0]].video_info?.variants,K}if(X.string_value.video_info&&X.string_value.video_info?.variants)return K.variants=X.string_value.video_info?.variants,K}else if(X.video_info&&X.video_info.variants)return K.variants=X.video_info.variants,K})).filter((X=>void 0!==X))},mapCarouselData:function(X,B){return X.map((X=>{const w=X.tweets?X.tweets:{};B&&B.props&&B.props.forEach((B=>{if("string"==typeof B)X[B]&&(w[B]=X[B]);else if("object"==typeof B&&B.length)for(let K of B){let B=X;for(let X=0;X<K.length;X++){let e=K[X];if("*"===e){let e=Object.keys(B),k=K.slice(X+1,K.length),R=[];for(let X of e){let w=B[X];if(!w)break;for(let X=0;X<k.length;X++){let B=k[X];w[B]&&X!==k.length-1?w=w[B]:X===k.length-1&&R.push(w[B])}}w.slides=R;break}B[e]&&X!==K.length-1?B=B[e]:X===K.length-1&&(w[e]=B[e])}}}));let K={tweets:w};if(X.string_value&&X.string_value.type&&B.types&&B.types.includes(X.string_value.type))return K})).filter((X=>void 0!==X))}};const S="WATCH_EVENT";const G=new(function(){function X(){this.listeners={}}return X.prototype.on=function(X,B){this.listeners[X]=B},X.prototype.emit=function(X,B){let w=this;setTimeout((function(){return w.listeners[X](B)}),0)},X}());function j(X){return(B.parsers||[]).filter((B=>new RegExp(B.watch).test(X)))}G.on(S,(function(X){j(X.url).forEach((B=>setTimeout((()=>function(X,B){for(const w of X.pipes){const X=F[w.name];X&&(B=X(B,w.arguments))}}(B,X.content)),0)))}));let i=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],this.url=arguments[1],i.apply(this,arguments)};let W=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){let X=this.onreadystatechange;var w=this;let K=!1;for(let X of B.parsers){if(K=new RegExp(X.watch,"i").test(w.url),K)break}return K?(this.onreadystatechange=function(){if(4===this.readyState&&j(this.url).length>0){const X={url:this.url,content:""===w.responseType||"text"===w.responseType?w.responseText:""};G.emit(S,X)}if(X)return X.apply(this,arguments)},W.apply(this,arguments)):W.apply(this,arguments)}}}X(),window.addEventListener("message",(B=>{"CONFIG_UPDATED_IN_STORAGE"!==B.data?.type||X()}))})();