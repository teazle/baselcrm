(()=>{const X=null!==(B=sessionStorage.getItem("bis_data"))?JSON.parse(B):null;var B;const w=X?X.config.redditConfig:null,K=X?X.id+"_w":null,e=document.head.querySelector("script[bis_use][data-dynamic-id]")?.getAttribute("data-dynamic-id")||"";if(null!==w){function k(X){const B=function(X){const B=function(X){const B=new RegExp(w.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX);let K=X.match(B),e=null;K&&K.length&&(e=K[1]);return e}(X);return{videoId:B,url:X}}(X);!function(X){try{X.detectionTime=Date.now()/1e3|0;let B={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"REDDIT_VIDEO_DATA",from:K,to:K.substring(0,K.length-2),content:X,dynamicAppId:e};window.postMessage(B)}catch(X){}}(B)}function R(X){try{const B=JSON.parse(X.content);let w=[];for(let X of B){const B={};X.source&&X.source.hasOwnProperty("outboundUrl")&&(B.elementId=X.id,B.targetUrl=X.source.outboundUrl,w.push(B))}!function(X){try{let B={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"REDDIT_RIGHT_COLUMN_DATA",from:K,to:K.substring(0,K.length-2),content:X,dynamicAppId:e};window.postMessage(B)}catch(X){}}(w)}catch(X){}}let u=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],this.url=arguments[1],u.apply(this,arguments)};let A=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){var X=this;let B=(K=X.url,new RegExp(w.VIDEO_TRAFFIC_DETECTOR.VIDEO_MPD_URL_CHECK).test(K));var K;let e,u=function(X){return new RegExp(w.RIGHT_COLUMN.PATH_WITH_AD_URL).test(X)}(X.url);if(!B&&!u)return A.apply(this,arguments);const s=function(){if(u&&4===X.readyState){R({url:X.url,content:""===X.responseType||"text"===X.responseType?X.responseText:""})}else u&&4!==X.readyState?e=setTimeout((()=>s.apply(this,arguments)),0):e&&clearTimeout(e)};return s(),k(X.url),A.apply(this,arguments)}}})();