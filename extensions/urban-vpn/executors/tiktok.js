(()=>{const X=!!document?.querySelector("script[adblock_use][bis_use]"),B=(()=>{const X=sessionStorage.getItem("bis_data");if(null!==X){return JSON.parse(X)}return null})(),w=B?.config?`${B.id}_t`:null,K=B?.config?.tiktokConfig?.TRAFFIC_LISTENER_CONFIG||{},e=document.head.querySelector("script[bis_use][data-dynamic-id]")?.getAttribute("data-dynamic-id")||"",{PARSERS:k=[]}=K;ParserProcessors={XMLHttpRequest:function(B){const w=fetch;fetch=async function(K){let e=K instanceof Request?K.url:K;if("object"==typeof e&&e.href&&(e=e.href),!(X=>{let B=X.replace(/.*\/([gimy]*)$/,"$1"),w=X.replace(new RegExp("^/(.*?)/"+B+"$"),"$1");return new RegExp(w,B)})(B.QUERY).test(e))return w.apply(this,arguments);try{const K=await w.apply(this,arguments);if(K.body instanceof ReadableStream){const w=K.clone(),e=await w.json(),k=e[B.CONTENT_QUERY],A=R(k,B.PATHS_CHECK_AD);if(A?.length&&(u(A,B),X)){e[B.CONTENT_QUERY]=k.filter((X=>!X.isAd));const X=JSON.stringify(e);return new Response(X,{status:K.status,statusText:K.statusText,headers:K.headers})}}return K}catch(X){return w.apply(this,arguments)}}}};const R=(X,B)=>{const w=[];for(let K of X)B.some((X=>X.reduce(((X,B)=>X&&"object"==typeof X?X[B]:X),K)))&&w.push(K);return w},u=(X,B)=>{if(X?.length)for(let e of X){const X=A(e,K.PROPERTIES_FOR_AD_DATA,B.PATHS_GET_PROPERTIES);X&&s(w,X)}},A=function(X,B,w){let K={};for(let e of B){const{NAME:B,PATH_NAME:k,IS_NECESSARY:R}=e,u=w[k];if(K[B]=u?.length?u.reduce(((X,B,w)=>{if(w===u.length-1&&"PATH_TO_PAGE_LINK"===k){return`https://www.tiktok.com/@${X[B]}`}return X&&"object"==typeof X?X?X[B]:null:X??null}),X):null,R&&!K[B])return null}return K},s=(X,B)=>{try{let w={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"TIKTOK_VIDEO_CANDIDATES",from:X,to:X.substring(0,X.length-2),content:B,dynamicAppId:e};window.postMessage(w)}catch(X){}};for(let X of k)X.USE&&ParserProcessors[X.TYPE](X)})();