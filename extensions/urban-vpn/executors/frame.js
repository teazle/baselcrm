(()=>{const X=null!==(B=sessionStorage.getItem("bis_data"))?JSON.parse(B):null;var B;const w=document.querySelector("script[bis_id]");window.bisData={id:w?w.getAttribute("bis_id")+"_w":null,html5TargetUrlDetectionConfig:X?X.config.html5TargetUrlDetectionConfig:null};const K=window.bisData.html5TargetUrlDetectionConfig,e=window.bisData.id,k=document.head.querySelector("script[bis_use][data-dynamic-id]")?.getAttribute("data-dynamic-id")||"";function R(){return(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22)}function u(X,B,w,K){if(!window.bisData)return;let e=window.bisData.html5TargetUrlDetectionConfig.TARGET_URL_CLICK_ELEMENTS_SELECTOR;var u=document.querySelectorAll(e);if(u.length){window.bisData.origWindowOpen=window.open,window.bisData.elementSquare=0,window.bisData.clickTargetUrl=[],window.bisData.clickTargetUrlProcessed=!1;var A=function(e){if(window.bisData.clickTargetUrl.some((X=>X.href===e)))return null;if(window.bisData.clickTargetUrl.push({href:e,square:window.bisData.elementSquare}),window.bisData&&window.bisData.clickTargetUrl&&window.bisData.clickTargetUrl.length){let e="GET_WINDOW_TARGET_URL"===K.type?{targetUrlList:window.bisData.clickTargetUrl}:{chainId:K.content.chainId,clickTargetUrl:window.bisData.clickTargetUrl},u={posdMessageId:"PANELOS_MESSAGE",posdHash:R(),type:`${K.type}_RESPOND`,from:X,to:X.substring(0,X.length-2),content:e,dynamicAppId:k};document.body&&document.body.setAttribute&&document.body.setAttribute("bis_mes_to_fr",JSON.stringify(u)),B.postMessage&&B.postMessage(u,w)}return null};window.open=A;for(var s=0;s<u.length&&0===window.bisData.clickTargetUrl.length;s++)try{if(u[s]&&u[s].click&&u[s].getBoundingClientRect){let X=u[s].getBoundingClientRect();X.width>40&&X.height>40&&(window.bisData.elementSquare=X.width*X.height,window.open==A&&u[s].click())}}catch(X){}setTimeout((()=>{window.open=window.bisData.origWindowOpen}),1e3),window.bisData.clickTargetUrlProcessed=!0}}window.addEventListener("message",(function(X){try{var B=e,w=X.data;let s=X.source,U=X.origin;if(void 0!==(A=w)&&A?.dynamicAppId===k&&void 0!==A.posdMessageId&&void 0!==A.from&&void 0!==A.to&&void 0!==A.type&&void 0!==A.content&&"PANELOS_MESSAGE"===A.posdMessageId&&w.to===B)if("GET_WINDOW_TARGET_URL"===w.type){let e=function(X,B,w){let K=l(B,[e,k,R,u,A,s],w);K&&K.length;return K;function e(X){if(void 0!==X.clickTag&&U(X.clickTag))return{href:X.clickTag,square:1000001}}function k(X){if(void 0!==X.adData){if(void 0!==X.adData.destination_url&&U(X.adData.destination_url))return{href:X.adData.destination_url,square:1000001};if(void 0!==X.adData.redirect_url&&U(X.adData.redirect_url))return{href:X.adData.redirect_url,square:1000001}}}function R(X){if(void 0!==X.BF&&void 0!==X.BF.Parameters&&void 0!==X.BF.Parameters.targeturl&&U(X.BF.Parameters.targeturl))return{href:X.BF.Parameters.targeturl,square:1000001}}function u(X){if(void 0!==X.ADAPT&&void 0!==X.ADAPT.symbols&&void 0!==X.ADAPT.symbols.stage&&void 0!==X.ADAPT.symbols.stage.clickUrl&&U(X.ADAPT.symbols.stage.clickUrl))return{href:X.ADAPT.symbols.stage.clickUrl,square:1000001}}function A(X){if(void 0!==X.admixAPI&&void 0!==X.admixAPI.ownerBanner&&void 0!==X.admixAPI.ownerBanner.clickUrl&&U(X.admixAPI.ownerBanner.clickUrl))return{href:X.admixAPI.ownerBanner.clickUrl,square:1000001}}function s(B,w){let K=Q(X,B,w);if(U(K))return{href:K,square:999999}}function U(X){return"string"==typeof X&&X.length>0&&(-1!==X.indexOf("http")||-1!==X.indexOf("//"))}function l(X,B,w){let K=[];for(let e of B)try{let B=e(X,w);B&&B.href&&K.push(B)}catch(X){}return K}function Q(X,B,w){let K=P(B,w);return K&&0!==K.length?H(B,K,w):null}function H(X,B,w,K=[]){let e=w.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(K.length>e)return null;for(let e of B)try{let B=X[e];if(!B)return null;let k=K.concat(e);if("object"==typeof B){let X=H(B,Object.getOwnPropertyNames(B),w,k);if(X)return X}else if("string"==typeof B&&y(e,w)&&U(B))return B}catch(X){}return null}function y(X,B){let w=p(X),K=B.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS;for(let X of K){if(w===X)return!0}return!1}function p(X){return X.toLowerCase().replace(/[^a-zA-Z]+/g,"")}function P(X,B){let w=Object.getOwnPropertyNames(X);const K=B.WINDOW_PROPERTY_NAMES;return w.filter((X=>K.indexOf(X)<0))}}(B,window,K);if(e.length){let w={posdMessageId:"PANELOS_MESSAGE",posdHash:R(),type:"GET_WINDOW_TARGET_URL_RESPOND",from:B,to:B.substring(0,B.length-2),content:{targetUrlList:e},dynamicAppId:k};document.body&&document.body.setAttribute&&document.body.setAttribute("bis_mes_to_fr",JSON.stringify(w)),X.source.postMessage&&X.source.postMessage(w,X.origin)}else{if(window.bisData.clickTargetUrlProcessed)return;u(B,s,U,w)}}else if("GET_WINDOW_CLICK_TARGET_URL"===w.type){if(window.bisData.clickTargetUrlProcessed)return;u(B,s,U,w)}}catch(X){}var A}),!1)})();